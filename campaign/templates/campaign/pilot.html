{% extends 'base.html' %}

{% block content %}

<div class="container mb-2">
    <div class="row">Callsign: {{pilot.callsign}}</div>
    <div class="row">Campaign: {{pilot.campaign}}</div>
    <div class="row">Missions Flown: {{missions}}</div>
    <div class="row">Total XP Earned: {{pilot.total_xp}}</div>
    <div class="row">Total XP Spent: {{spent}}</div>
</div>

<h4>Upgrades</h4>
<div class="container mb-2">
        {% for upgrade in pilot.upgrades.all %}
        {% ifchanged upgrade.type %}
        {% if not forloop.first %}
        </ul>
    </div>
        {% endif %}
    <div class="row">
        <ul class="list-inline">
            <li class="list-inline-item"><strong>{{upgrade.get_type_display}}</strong></li>
        {% endifchanged %}
            <li class="list-inline-item">{{upgrade}}</li>
        {% endfor %}
        </ul>
    </div>
</div>


<div class="row">
    <div class="col">
        <h4>Ships</h4>
    </div>
</div>

{% for ship in pilot.pilotship_set.all %}
<div class="container mb-2">
    <div class="row">
        <div class="col">
            <h5>{{ship.ship.name}}</h5> INI {{ship.initiative}}, Threat {{ship.threat}}
        </div>
    </div>

    <div class="row">
        {% for slot in ship.unlocked.all %}
        {% ifchanged slot.threat %}
        {% if not forloop.first %}
        </div>
        {% endif %}
        <div class="col">
            <h6>Threat {{slot.threat}}</h6>
       {% endifchanged %}
            <div>{{slot.get_type_display}} ({{slot.cost}})</div>
        {% endfor %}
        </div>
    </div>
</div>
{% endfor %}

<h4>Achievements</h4>
<div class="container mb-2">
    <div class="row">
        <ul class="list-item-group col">
        {% for event in achievements %}
            <li class="list-item">{{event.event}}: <span class="badge badge-primary badge-pill">{{event.count}}</span></li>
        {% endfor %}
        </ul>
    </div>
</div>


{% endblock %}