{% extends 'base.html' %}

{% load xwf_extras %}
{% load static %}

{% block content %}

{% with ai.dial.chassis as ship %}
<div class="container text-center">
    <h5 class=""><i class="xw-ship xw-ship-{{ship.css_name}}"></i>{{ai.dial.chassis}} AI</h5>
    <div class='row'>
        {% if ship.attack %}<div class='col attack'>{{ship.attack}}{{ship.get_attack_arc_display|add:' Arc'|get_icon}}</div>{% endif %}
        {% if ship.attack2 %}<div class='col attack'>{{ship.attack2}}{{ship.get_attack2_arc_display|add:' Arc'|get_icon}}</div>{% endif %}
        <div class='col agility'>{{ship.agility}}{{'agility'|get_icon}}</div>
        <div class='col hull'>{{ship.hull}}{{'hull'|get_icon}}</div>
        {% if ship.shields %}<div class='col shields'>{{ship.shields}}{{'shields'|get_icon}}</div>{% endif %}
        </div>
    {% if ai.dial.chassis.cloaking %}
    <div>
        <button type="button" class="btn btn-block btn-secondary">Decloaking</button>
        <ul class="list-group mb-4 list-group-horizontal">
            <li class="list-group-item flex-fill"><span class="">2 &#9664; {{'barrelroll'|get_icon}}</span></li>
            <li class="list-group-item flex-fill"><span class="">2 {{'straight'|get_icon}}</span></li>
            <li class="list-group-item flex-fill"><span class="">2 {{'barrelroll'|get_icon}} &#9654;</span></li>
            </ul>
    </div>
    {% endif %}

    <ul class="nav nav-pills mb-4" role="tablist">
        <li class="nav-item col" role="presentation">
            <a class="nav-link" id="mv-fl-tab" data-toggle="tab" href="#mv-fl" role="tab" aria-controls="home" aria-selected="true">Front (Left)</a>
        </li>
        <li class="nav-item col" role="presentation">
            <a class="nav-link" id="mv-be-tab" data-toggle="tab" href="#mv-be" role="tab" aria-controls="home" aria-selected="true">Bullseye</a>
        </li>
        <li class="nav-item col" role="presentation">
            <a class="nav-link" id="mv-fr-tab" data-toggle="tab" href="#mv-fr" role="tab" aria-controls="home" aria-selected="true">Front (Right)</a>
        </li>
         <li class="w-100"></li>

        <li class="nav-item col" role="presentation">
            <a class="nav-link" id="mv-lf-tab" data-toggle="tab" href="#mv-lf" role="tab" aria-controls="home" aria-selected="true">Left (Front)</a>
        </li>
        <li class="nav-item col" role="presentation"></li>
        <li class="nav-item col" role="presentation">
            <a class="nav-link" id="mv-rf-tab" data-toggle="tab" href="#mv-rf" role="tab" aria-controls="home" aria-selected="true">Right (Front)</a>
        </li>
         <li class="w-100"></li>

        <li class="nav-item col" role="presentation">
            <a class="nav-link" id="mv-la-tab" data-toggle="tab" href="#mv-la" role="tab" aria-controls="home" aria-selected="true">Left (Rear)</a>
        </li>
        <li class="nav-item col" role="presentation"></li>
        <li class="nav-item col" role="presentation">
            <a class="nav-link" id="mv-ra-tab" data-toggle="tab" href="#mv-ra" role="tab" aria-controls="home" aria-selected="true">Right (Rear)</a>
        </li>
         <li class="w-100"></li>

        <li class="nav-item col" role="presentation">
            <a class="nav-link" id="mv-al-tab" data-toggle="tab" href="#mv-al" role="tab" aria-controls="home" aria-selected="true">Rear (Left)</a>
        </li>
        <li class="nav-item col" role="presentation"></li>
        <li class="nav-item col" role="presentation">
            <a class="nav-link" id="mv-ar-tab" data-toggle="tab" href="#mv-ar" role="tab" aria-controls="home" aria-selected="true">Rear (Right)</a>
        </li>
    </ul>

    <div class="tab-content">
    {% regroup mvs by arc as maneuvers %}

        {% for dir in maneuvers %}
        <div class="tab-pane fade {% if forloop.first %}show{% endif %}" id="mv-{{dir.grouper|lower}}" role="tabpanel" aria-labelledby="mv-{{dir.grouper|lower}}-tab">
        {% for r in dir.list %}
            <button type="button" class="btn btn-block btn-secondary">{{r.get_range_display}}</button>
            <ul class="list-group mb-4 d-flex list-group-horizontal">
                {% for roll in r.rolls %}
                <li class="list-group-item flex-fill px-1">{{roll.speed}}<span class="{{roll.icon_color}}">{{roll.css_name|get_icon}}</span></li>
                {% endfor %}
            </ul>
        {% endfor %}
        </div>
        {% endfor %}

        <div>
            <button type="button" class="btn btn-block btn-danger">Fleeing</button>
            <div>Flee Threshold: {{ai.flee}}</div>
            <div>Hyperdrive: {{ai.dial.chassis.hyperdrive|yesno}}</div>
            <ul class="list-group mb-4 d-flex list-group-horizontal">
                {% for roll in fleeing.rolls %}
                <li class="list-group-item px-1 flex-fill">{{roll.speed}}<span class="{{roll.icon_color}}">{{roll.css_name|get_icon}}</span></li>
                {% endfor %}
            </ul>
        </div>
    </div>

    {% if fleeing %}
    <div class="row">
        <div>
        </div>
    </div>
    {% endif %}


</div>
{% endwith %}
{% endblock content %}

{% block extrajs %}
    <script src="{% static 'js/ai.js' %}"></script>
{% endblock extrajs %}
